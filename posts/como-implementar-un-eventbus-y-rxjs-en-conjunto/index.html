<!DOCTYPE html><html lang="es-ES" data-mode="dark" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="Arquitecturas Orientadas a Eventos. Implementando un EventBus y RxJS en Conjunto" /><meta name="author" content="Benjamin" /><meta property="og:locale" content="es_ES" /><meta name="description" content="Ingeniería de software aplicada, tips, buenas práctias y códigos" /><meta property="og:description" content="Ingeniería de software aplicada, tips, buenas práctias y códigos" /><link rel="canonical" href="https://nullpointer-excelsior.github.io/posts/como-implementar-un-eventbus-y-rxjs-en-conjunto/" /><meta property="og:url" content="https://nullpointer-excelsior.github.io/posts/como-implementar-un-eventbus-y-rxjs-en-conjunto/" /><meta property="og:site_name" content="Nullpointer Excelsior" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2023-08-16T08:32:00-04:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Arquitecturas Orientadas a Eventos. Implementando un EventBus y RxJS en Conjunto" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Benjamin"},"dateModified":"2023-08-16T08:32:00-04:00","datePublished":"2023-08-16T08:32:00-04:00","description":"Ingeniería de software aplicada, tips, buenas práctias y códigos","headline":"Arquitecturas Orientadas a Eventos. Implementando un EventBus y RxJS en Conjunto","mainEntityOfPage":{"@type":"WebPage","@id":"https://nullpointer-excelsior.github.io/posts/como-implementar-un-eventbus-y-rxjs-en-conjunto/"},"url":"https://nullpointer-excelsior.github.io/posts/como-implementar-un-eventbus-y-rxjs-en-conjunto/"}</script><title>Arquitecturas Orientadas a Eventos. Implementando un EventBus y RxJS en Conjunto | Nullpointer Excelsior</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Nullpointer Excelsior"><meta name="application-name" content="Nullpointer Excelsior"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="/assets/img/avatar.webp" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Nullpointer Excelsior</a></div><div class="site-subtitle font-italic">Ingeniería de software aplicada</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>INICIO</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORÍAS</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>ETIQUETAS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVO</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ACERCA DE</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <a href="https://github.com/nullpointer-excelsior" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a></div></div><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100 pl-3 pr-3 pl-md-4 pr-md-4"> <span id="breadcrumb"> <span> <a href="/"> Inicio </a> </span> <span>Arquitecturas Orientadas a Eventos. Implementando un EventBus y RxJS en Conjunto</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Entrada</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Buscar..."> </span> <span id="search-cancel" >Cancelar</span></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container pl-xl-4 pr-xl-4"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pr-xl-4"><div class="post pl-1 pr-1 pl-md-2 pr-md-2"><h1 data-toc-skip>Arquitecturas Orientadas a Eventos. Implementando un EventBus y RxJS en Conjunto</h1><div class="post-meta text-muted"> <span> Publicado <em class="" data-ts="1692189120" data-df="YYYY-MM-DD" data-toggle="tooltip" data-placement="bottom"> 2023-08-16 </em> </span><div class="d-flex justify-content-between"> <span> Por <em> Benjamin </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1043 palabras"> <em>5 min</em> de lectura</span></div></div></div><div class="post-content"><p><img data-src="https://i.ibb.co/F3C2gcc/Screenshot-2023-08-16-at-10-14-58.png" alt="img" data-proofer-ignore></p><p>En el mundo de la arquitectura de software, especialmente en entornos orientados a microservicios, la comunicación y la coordinación entre componentes son cruciales. Una forma efectiva de lograrlo es mediante el uso de patrones de diseño basados en eventos. Uno de estos patrones es el uso de un EventBus, que actúa como un intermediario entre los distintos componentes, permitiendo que se comuniquen y se mantengan desacoplados.</p><p>En este artículo, exploraremos cómo implementar un EventBus utilizando RxJS, una librería de JavaScript que proporciona un conjunto poderoso de herramientas para trabajar con secuencias de eventos asincrónicos. Analizaremos un ejemplo de código que muestra cómo implementar y utilizar un EventBus en un contexto de arquitectura de microservicios.</p><h2 id="parte-1-contratos-y-definiciones"><span class="mr-2">Parte 1: Contratos y Definiciones</span><a href="#parte-1-contratos-y-definiciones" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>En la primera parte del código, encontramos las definiciones de contratos y eventos de dominio. Estos contratos establecen la base para nuestro EventBus.</p><div class="language-typescript highlighter-rouge"><div class="code-header"> <span data-label-text="TypeScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="¡Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
</pre><td class="rouge-code"><pre><span class="k">import</span> <span class="p">{</span> <span class="nx">Observable</span><span class="p">,</span> <span class="nx">Subject</span><span class="p">,</span> <span class="nx">filter</span><span class="p">,</span> <span class="nx">iif</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">rxjs</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">v4</span> <span class="k">as</span> <span class="nx">uuid</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">uuid</span><span class="dl">'</span><span class="p">;</span>

<span class="c1">// Representa un evento de dominio con una carga de datos específica.</span>
<span class="k">export</span> <span class="kd">abstract</span> <span class="kd">class</span> <span class="nx">DomainEvent</span><span class="o">&lt;</span><span class="nx">D</span><span class="p">,</span> <span class="nx">E</span> <span class="kd">extends</span> <span class="kr">string</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="k">readonly</span> <span class="na">datetime</span><span class="p">:</span> <span class="nb">Date</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">();</span>
    <span class="k">readonly</span> <span class="nx">id</span> <span class="o">=</span> <span class="nx">uuid</span><span class="p">()</span>
    <span class="kd">abstract</span> <span class="na">name</span><span class="p">:</span> <span class="nx">E</span>
    <span class="kd">constructor</span><span class="p">(</span><span class="k">public</span> <span class="k">readonly</span> <span class="na">data</span><span class="p">:</span> <span class="nx">D</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Define el contrato para un despachador de eventos.</span>
<span class="k">export</span> <span class="kr">interface</span> <span class="nx">EventDispatcher</span><span class="o">&lt;</span><span class="nx">E</span> <span class="kd">extends</span> <span class="kr">string</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="nx">dispatch</span><span class="o">&lt;</span><span class="nx">T</span> <span class="kd">extends</span> <span class="nx">DomainEvent</span><span class="o">&lt;</span><span class="kr">any</span><span class="p">,</span> <span class="nx">E</span><span class="o">&gt;&gt;</span><span class="p">(</span><span class="na">event</span><span class="p">:</span> <span class="nx">T</span><span class="p">):</span> <span class="k">void</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// Define el contrato para un oyente de eventos.</span>
<span class="k">export</span> <span class="kr">interface</span> <span class="nx">EventListener</span><span class="o">&lt;</span><span class="nx">E</span> <span class="kd">extends</span> <span class="kr">string</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="nx">onEvent</span><span class="o">&lt;</span><span class="nx">T</span> <span class="kd">extends</span> <span class="nx">DomainEvent</span><span class="o">&lt;</span><span class="kr">any</span><span class="p">,</span> <span class="nx">E</span><span class="o">&gt;&gt;</span><span class="p">(</span><span class="nx">name</span><span class="p">?:</span> <span class="nx">E</span><span class="p">):</span> <span class="nx">Observable</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span>
<span class="p">}</span>

<span class="c1">// Define el contrato para un bus de eventos que actúa como despachador y oyente.</span>
<span class="k">export</span> <span class="kr">interface</span> <span class="nx">EventBus</span><span class="o">&lt;</span><span class="nx">E</span> <span class="kd">extends</span> <span class="kr">string</span><span class="o">&gt;</span> <span class="kd">extends</span> <span class="nx">EventListener</span><span class="o">&lt;</span><span class="nx">E</span><span class="o">&gt;</span><span class="p">,</span> <span class="nx">EventDispatcher</span><span class="o">&lt;</span><span class="nx">E</span><span class="o">&gt;</span> <span class="p">{</span>

<span class="p">}</span>

</pre></table></code></div></div><h2 id="parte-2-implementación-de-eventos"><span class="mr-2">Parte 2: Implementación de Eventos</span><a href="#parte-2-implementación-de-eventos" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>En esta sección, se definen eventos específicos que heredan de DomainEvent, proporcionando detalles sobre datos y nombres de eventos. Nos centraremos en un ejemplo relacionado al retail.</p><div class="language-typescript highlighter-rouge"><div class="code-header"> <span data-label-text="TypeScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="¡Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre><td class="rouge-code"><pre>
<span class="k">export</span> <span class="kd">type</span> <span class="nx">WarehouseEvents</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">PRODUCT_CREATED</span><span class="dl">"</span> <span class="o">|</span> <span class="dl">"</span><span class="s2">CATEGORY_CREATED</span><span class="dl">"</span> <span class="o">|</span> <span class="dl">"</span><span class="s2">STOCK_UPDATED</span><span class="dl">"</span>

<span class="kd">class</span> <span class="nx">ProductCreated</span> <span class="kd">extends</span> <span class="nx">DomainEvent</span><span class="o">&lt;</span><span class="p">{</span> <span class="na">sku</span><span class="p">:</span> <span class="kr">string</span> <span class="p">},</span> <span class="nx">WarehouseEvents</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="na">name</span><span class="p">:</span> <span class="nx">WarehouseEvents</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">PRODUCT_CREATED</span><span class="dl">"</span>
<span class="p">}</span>

<span class="kd">class</span> <span class="nx">StockUpdated</span> <span class="kd">extends</span> <span class="nx">DomainEvent</span><span class="o">&lt;</span><span class="p">{</span> <span class="na">sku</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span> <span class="na">stock</span><span class="p">:</span> <span class="kr">number</span> <span class="p">},</span> <span class="nx">WarehouseEvents</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="na">name</span><span class="p">:</span> <span class="nx">WarehouseEvents</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">STOCK_UPDATED</span><span class="dl">"</span>
<span class="p">}</span>

<span class="kd">class</span> <span class="nx">CategoryCreated</span> <span class="kd">extends</span> <span class="nx">DomainEvent</span><span class="o">&lt;</span><span class="kr">string</span><span class="p">,</span> <span class="nx">WarehouseEvents</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="na">name</span><span class="p">:</span> <span class="nx">WarehouseEvents</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">CATEGORY_CREATED</span><span class="dl">"</span>
<span class="p">}</span>

</pre></table></code></div></div><h2 id="parte-3-implementación-del-eventbus"><span class="mr-2">Parte 3: Implementación del EventBus</span><a href="#parte-3-implementación-del-eventbus" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Aquí es donde se implementa la lógica principal del EventBus utilizando RxJS.</p><div class="language-typescript highlighter-rouge"><div class="code-header"> <span data-label-text="TypeScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="¡Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
</pre><td class="rouge-code"><pre><span class="cm">/**
 * Una implementación de EventBus utilizando RxJS.
 */</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">RxjsEventBus</span><span class="o">&lt;</span><span class="nx">E</span> <span class="kd">extends</span> <span class="kr">string</span><span class="o">&gt;</span> <span class="k">implements</span> <span class="nx">EventBus</span><span class="o">&lt;</span><span class="nx">E</span><span class="o">&gt;</span> <span class="p">{</span>

    <span class="c1">// Creación de un flujo de eventos usando un Subject</span>
    <span class="k">private</span> <span class="nx">events$</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Subject</span><span class="o">&lt;</span><span class="nx">DomainEvent</span><span class="o">&lt;</span><span class="kr">any</span><span class="p">,</span> <span class="nx">E</span><span class="o">&gt;&gt;</span><span class="p">()</span>

    <span class="c1">// Método para suscribirse a eventos específicos o todos los eventos</span>
    <span class="nx">onEvent</span><span class="o">&lt;</span><span class="nx">T</span> <span class="kd">extends</span> <span class="nx">DomainEvent</span><span class="o">&lt;</span><span class="kr">any</span><span class="p">,</span> <span class="nx">E</span><span class="o">&gt;&gt;</span><span class="p">(</span><span class="nx">eventName</span><span class="p">?:</span> <span class="nx">E</span><span class="p">):</span> <span class="nx">Observable</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span> <span class="p">{</span>
        <span class="c1">// Usando iif para filtrar eventos basado en el nombre del evento</span>
        <span class="k">return</span> <span class="nx">iif</span><span class="p">(</span>
            <span class="p">()</span> <span class="o">=&gt;</span> <span class="nx">eventName</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">,</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">events$</span><span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">filter</span><span class="p">(</span><span class="nx">event</span> <span class="o">=&gt;</span> <span class="nx">eventName</span> <span class="o">===</span> <span class="nx">event</span><span class="p">.</span><span class="nx">name</span><span class="p">)),</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">events$</span><span class="p">.</span><span class="nx">asObservable</span><span class="p">()</span>
        <span class="p">)</span> <span class="k">as</span> <span class="nx">Observable</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">// Método para despachar eventos al flujo</span>
    <span class="nx">dispatch</span><span class="o">&lt;</span><span class="nx">T</span> <span class="kd">extends</span> <span class="nx">DomainEvent</span><span class="o">&lt;</span><span class="kr">any</span><span class="p">,</span> <span class="nx">E</span><span class="o">&gt;&gt;</span><span class="p">(</span><span class="na">event</span><span class="p">:</span> <span class="nx">T</span><span class="p">):</span> <span class="k">void</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">events$</span><span class="p">.</span><span class="nx">next</span><span class="p">(</span><span class="nx">event</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

</pre></table></code></div></div><p>La implementación de <code class="language-plaintext highlighter-rouge">RxjsEventBus</code> utiliza un flujo de eventos <code class="language-plaintext highlighter-rouge">events$</code> implementado con <code class="language-plaintext highlighter-rouge">Subject</code> de RxJS para manejar la comunicación entre componentes. El método <code class="language-plaintext highlighter-rouge">onEvent</code> permite a los componentes suscribirse a eventos específicos o todos los eventos. Se utiliza el operador <code class="language-plaintext highlighter-rouge">iif</code> para filtrar eventos según el nombre del evento y devuelve un flujo de eventos observable. El método <code class="language-plaintext highlighter-rouge">dispatch</code> se utiliza para enviar eventos al flujo. En conjunto, esta implementación facilita la comunicación asincrónica entre componentes utilizando el patrón Observable/Observer de RxJS.</p><h2 id="parte-4-utilizando-el-eventbus"><span class="mr-2">Parte 4: Utilizando el EventBus</span><a href="#parte-4-utilizando-el-eventbus" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Finalmente, se crea una instancia del EventBus, se suscribe a los eventos que deseamos y se despachan algunos eventos de ejemplo.</p><div class="language-typescript highlighter-rouge"><div class="code-header"> <span data-label-text="TypeScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="¡Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre><td class="rouge-code"><pre><span class="kd">const</span> <span class="nx">eventbus</span><span class="p">:</span> <span class="nx">EventBus</span><span class="o">&lt;</span><span class="nx">WarehouseEvents</span><span class="o">&gt;</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">RxjsEventBus</span><span class="o">&lt;</span><span class="nx">WarehouseEvents</span><span class="o">&gt;</span><span class="p">()</span>

<span class="nx">eventbus</span><span class="p">.</span><span class="nx">onEvent</span><span class="p">()</span>
    <span class="p">.</span><span class="nx">subscribe</span><span class="p">({</span>
        <span class="na">next</span><span class="p">:</span> <span class="nx">event</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">all-events</span><span class="dl">"</span><span class="p">,</span> <span class="nx">event</span><span class="p">),</span>
        <span class="na">error</span><span class="p">:</span> <span class="nx">error</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span>
    <span class="p">})</span>

<span class="nx">eventbus</span><span class="p">.</span><span class="nx">onEvent</span><span class="p">(</span><span class="dl">"</span><span class="s2">CATEGORY_CREATED</span><span class="dl">"</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">subscribe</span><span class="p">({</span>
        <span class="na">next</span><span class="p">:</span> <span class="nx">event</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">category-event</span><span class="dl">"</span><span class="p">,</span> <span class="nx">event</span><span class="p">.</span><span class="nx">data</span><span class="p">),</span>
        <span class="na">error</span><span class="p">:</span> <span class="nx">error</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span>
    <span class="p">})</span>

<span class="nx">eventbus</span><span class="p">.</span><span class="nx">dispatch</span><span class="p">(</span><span class="k">new</span> <span class="nx">ProductCreated</span><span class="p">({</span> <span class="na">sku</span><span class="p">:</span> <span class="dl">"</span><span class="s2">9978363737</span><span class="dl">"</span> <span class="p">}))</span>
<span class="nx">eventbus</span><span class="p">.</span><span class="nx">dispatch</span><span class="p">(</span><span class="k">new</span> <span class="nx">CategoryCreated</span><span class="p">(</span><span class="dl">"</span><span class="s2">ELECTRONICS</span><span class="dl">"</span><span class="p">))</span>
<span class="nx">eventbus</span><span class="p">.</span><span class="nx">dispatch</span><span class="p">(</span><span class="k">new</span> <span class="nx">StockUpdated</span><span class="p">({</span> <span class="na">sku</span><span class="p">:</span> <span class="dl">"</span><span class="s2">6453993</span><span class="dl">"</span><span class="p">,</span> <span class="na">stock</span><span class="p">:</span> <span class="mi">7</span> <span class="p">}))</span>

</pre></table></code></div></div><h2 id="importancia-del-código-en-arquitecturas-orientadas-a-eventos"><span class="mr-2">Importancia del Código en Arquitecturas Orientadas a Eventos</span><a href="#importancia-del-código-en-arquitecturas-orientadas-a-eventos" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>La implementación del EventBus presentada en este código tiene un impacto significativo en las arquitecturas de microservicios orientadas a eventos. Aquí hay algunas razones clave:</p><ul><li><p><code class="language-plaintext highlighter-rouge">Desacoplamiento</code>: El EventBus permite que los componentes se comuniquen sin tener conocimiento directo entre sí. Cada microservicio puede despachar eventos y suscribirse a eventos de interés, lo que reduce el acoplamiento entre los servicios.</p><li><p><code class="language-plaintext highlighter-rouge">Escalabilidad</code>: En un entorno de microservicios, donde los componentes pueden aumentar o disminuir dinámicamente, el EventBus facilita la adición de nuevos servicios y la adaptación a cambios en la demanda.</p><li><p><code class="language-plaintext highlighter-rouge">Flexibilidad</code>: Los eventos encapsulan acciones significativas dentro del sistema. Si se requiere una acción adicional en respuesta a un evento, es posible agregar oyentes sin afectar otros componentes.</p><li><p><code class="language-plaintext highlighter-rouge">Rastreabilidad</code>: Los eventos registran acciones y cambios en el sistema. Esto permite la trazabilidad de acciones y la auditoría, lo que es esencial para aplicaciones críticas y sistemas complejos.</p><li><p><code class="language-plaintext highlighter-rouge">Mantenibilidad</code>: Cambiar o extender el comportamiento de un componente se vuelve más sencillo, ya que los cambios pueden realizarse en el contexto del evento correspondiente sin afectar otros componentes.</p></ul><p>El EventBus en arquitecturas de microservicios es una pieza crucial para establecer comunicación efectiva y desacoplada entre componentes. Permite la construcción de sistemas altamente escalables, flexibles y mantenibles.</p><p>Con EventBus, podremos comunicar desde componentes internos de una aplicación hasta microservicios totalmente separados. Solo debemos definir las implementaciones específicas dependiendo del caso que tengamos.</p><h2 id="conclusión"><span class="mr-2">Conclusión</span><a href="#conclusión" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>En este artículo, hemos explorado cómo implementar un EventBus utilizando RxJS en el contexto de arquitecturas de microservicios orientadas a eventos. Hemos desglosado el código paso a paso y hemos discutido la importancia de esta implementación en la construcción de sistemas flexibles y escalables.</p><p>Esperamos que esta inmersión en la implementación de EventBus te haya brindado una comprensión sólida de cómo puedes utilizar esta herramienta para mejorar la comunicación y la coordinación entre los componentes de tus aplicaciones orientadas a eventos. Te animamos a experimentar con esta implementación y a explorar más a fondo cómo puede beneficiar tu propia arquitectura de software.</p><h2 id="github-repository"><span class="mr-2"><a href="https://github.com/nullpointer-excelsior/advanced-design-patterns-with-typescript/tree/master/src/event-architecture">Github repository</a></span><a href="#github-repository" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Meme de cortesía</p><p><img data-src="https://i.ibb.co/QM0dT9d/Screenshot-2023-07-28-at-16-13-08.png" alt="meme" data-proofer-ignore></p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='//categories/programacion/'>Programacion</a>, <a href='//categories/typescript/'>Typescript</a>, <a href='//categories/microservicios/'>Microservicios</a>, <a href='//categories/eventos/'>Eventos</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="//tags/programacion/" class="post-tag no-text-decoration" >Programacion</a> <a href="//tags/typescript/" class="post-tag no-text-decoration" >Typescript</a> <a href="//tags/arquitectura-de-software/" class="post-tag no-text-decoration" >Arquitectura de software</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> Esta entrada está licenciada bajo <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> por el autor.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Compartir</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Arquitecturas+Orientadas+a+Eventos.+Implementando+un+EventBus+y+RxJS+en+Conjunto+-+Nullpointer+Excelsior&url=https%3A%2F%2Fnullpointer-excelsior.github.io%2Fposts%2Fcomo-implementar-un-eventbus-y-rxjs-en-conjunto%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Arquitecturas+Orientadas+a+Eventos.+Implementando+un+EventBus+y+RxJS+en+Conjunto+-+Nullpointer+Excelsior&u=https%3A%2F%2Fnullpointer-excelsior.github.io%2Fposts%2Fcomo-implementar-un-eventbus-y-rxjs-en-conjunto%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Fnullpointer-excelsior.github.io%2Fposts%2Fcomo-implementar-un-eventbus-y-rxjs-en-conjunto%2F&text=Arquitecturas+Orientadas+a+Eventos.+Implementando+un+EventBus+y+RxJS+en+Conjunto+-+Nullpointer+Excelsior" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fnullpointer-excelsior.github.io%2Fposts%2Fcomo-implementar-un-eventbus-y-rxjs-en-conjunto%2F" data-toggle="tooltip" data-placement="top" title="Linkedin" target="_blank" rel="noopener" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copiar enlace" data-title-succeed="¡Enlace copiado!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Actualizado recientemente</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/microservicios-observabilidad-en-microservicios-un-ejemplo-practico-de-trazas-distribuidas/">Microservicios 2 Observabilidad en NestJs, un ejemplo práctico de trazas distribuidas</a><li><a href="/posts/realtime-with-reactive-programming/">Aplicaciones en tiempo real con programación reactiva</a><li><a href="/posts/tranajando-con-1millon-de-registros-con-java-stream/">Trabajando con 1 millón de registros con Java Stream</a><li><a href="/posts/disenando-microservicios-con-ddd/">Diseñando Microservicios con Domain Driven Design y NestJS</a><li><a href="/posts/alto-rendimiento-con-cqrs-eventos-en-nestjs/">CQRS en Soluciones de Alto Rendimiento con Nestjs</a></ul></div><div id="access-tags"><div class="panel-heading">Etiquetas populares</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/typescript/">typescript</a> <a class="post-tag" href="/tags/nestjs/">nestjs</a> <a class="post-tag" href="/tags/arquitectura/">arquitectura</a> <a class="post-tag" href="/tags/hexagonal/">hexagonal</a> <a class="post-tag" href="/tags/javascript/">javascript</a> <a class="post-tag" href="/tags/frontend/">frontend</a> <a class="post-tag" href="/tags/java/">Java</a> <a class="post-tag" href="/tags/microservicios/">microservicios,</a> <a class="post-tag" href="/tags/typescript/">Typescript</a> <a class="post-tag" href="/tags/architecture/">Architecture</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contenido</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 pl-3 pr-3 pr-xl-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Lecturas adicionales</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/realtime-with-reactive-programming/"><div class="card-body"> <em class="small" data-ts="1677166320" data-df="YYYY-MM-DD" > 2023-02-23 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Aplicaciones en tiempo real con programación reactiva</h3><div class="text-muted small"><p> Las aplicaciones en tiempo real se definen como aquellas que ofrecen una respuesta en tiempo real a eventos del mundo real. Piensa en aplicaciones de chat en línea, aplicaciones de juegos, aplica...</p></div></div></a></div><div class="card"> <a href="/posts/robust-error-handling-beyond-try-catch/"><div class="card-body"> <em class="small" data-ts="1678721520" data-df="YYYY-MM-DD" > 2023-03-13 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Robusto control de errores más allá del Try Catch</h3><div class="text-muted small"><p> El control de errores en aplicaciones tradicionalmente los manejamos con trycatch si bien esto nos proporciona una manera efectiva y simple de controlar errores y definir lógicas un poco más elab...</p></div></div></a></div><div class="card"> <a href="/posts/state-machine-design-pattern/"><div class="card-body"> <em class="small" data-ts="1686151920" data-df="YYYY-MM-DD" > 2023-06-07 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Conociendo el patrón de diseño state machine.</h3><div class="text-muted small"><p> Sí correcto este es otro post de patrones de diseño. lo distinto es que es uno de los que nadie habla pero se usa muy a menudo y no nos damos ni cuenta. Hoy voy a hablarles del patrón de diseño c...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="//posts/chatgp-calling-functions/" class="btn btn-outline-primary" prompt="Anterior"><p>ChatGPT Calling Functions ahora la AI puede llamar funciones de código</p></a> <a href="//posts/arquitectura-frontend-1-como-integrar-rxjs-4-react-para-aplicaciones-asincronas-complejas/" class="btn btn-outline-primary" prompt="Nuevo"><p>Arquitectura Frontend 1. Cómo integrar RxJS en React para aplicaciones asíncronas complejas</p></a></div></div></div><footer class="row pl-3 pr-3"><div class="col-12 d-flex justify-content-between align-items-center text-muted pl-0 pr-0"><div class="footer-left"><p class="mb-0"> © 2025 <a href="https://github.com/nullpointer-excelsior">Benjamin</a>. <span data-toggle="tooltip" data-placement="top" title="Salvo que se indique explícitamente, las entradas de este blog están licenciadas bajo la Creative Commons Attribution 4.0 International (CC BY 4.0) License por el autor.">Algunos derechos reservados.</span></p></div><div class="footer-right"><p class="mb-0"> Hecho con <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> usando el tema <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> .</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Etiquetas populares</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/typescript/">typescript</a> <a class="post-tag" href="/tags/nestjs/">nestjs</a> <a class="post-tag" href="/tags/arquitectura/">arquitectura</a> <a class="post-tag" href="/tags/hexagonal/">hexagonal</a> <a class="post-tag" href="/tags/javascript/">javascript</a> <a class="post-tag" href="/tags/frontend/">frontend</a> <a class="post-tag" href="/tags/java/">Java</a> <a class="post-tag" href="/tags/microservicios/">microservicios,</a> <a class="post-tag" href="/tags/typescript/">Typescript</a> <a class="post-tag" href="/tags/architecture/">Architecture</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">¡Oops! No se encuentran resultados.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/es.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/unregister.js"></script>
