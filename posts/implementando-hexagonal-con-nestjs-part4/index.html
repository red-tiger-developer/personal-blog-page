<!DOCTYPE html><html lang="es-ES" data-mode="dark" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="Arquitectura hexagonal Parte IV Patrones de arquitectura sobre la capa Application" /><meta name="author" content="Benjamin" /><meta property="og:locale" content="es_ES" /><meta name="description" content="Ingeniería de software aplicada, tips, buenas práctias y códigos" /><meta property="og:description" content="Ingeniería de software aplicada, tips, buenas práctias y códigos" /><link rel="canonical" href="https://nullpointer-excelsior.github.io/posts/implementando-hexagonal-con-nestjs-part4/" /><meta property="og:url" content="https://nullpointer-excelsior.github.io/posts/implementando-hexagonal-con-nestjs-part4/" /><meta property="og:site_name" content="Nullpointer Excelsior" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-11-07T12:32:00-03:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Arquitectura hexagonal Parte IV Patrones de arquitectura sobre la capa Application" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Benjamin"},"dateModified":"2022-11-07T12:32:00-03:00","datePublished":"2022-11-07T12:32:00-03:00","description":"Ingeniería de software aplicada, tips, buenas práctias y códigos","headline":"Arquitectura hexagonal Parte IV Patrones de arquitectura sobre la capa Application","mainEntityOfPage":{"@type":"WebPage","@id":"https://nullpointer-excelsior.github.io/posts/implementando-hexagonal-con-nestjs-part4/"},"url":"https://nullpointer-excelsior.github.io/posts/implementando-hexagonal-con-nestjs-part4/"}</script><title>Arquitectura hexagonal Parte IV Patrones de arquitectura sobre la capa Application | Nullpointer Excelsior</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Nullpointer Excelsior"><meta name="application-name" content="Nullpointer Excelsior"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="/assets/img/avatar.webp" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Nullpointer Excelsior</a></div><div class="site-subtitle font-italic">Ingeniería de software aplicada</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>INICIO</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORÍAS</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>ETIQUETAS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVO</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ACERCA DE</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <a href="https://github.com/nullpointer-excelsior" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a></div></div><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100 pl-3 pr-3 pl-md-4 pr-md-4"> <span id="breadcrumb"> <span> <a href="/"> Inicio </a> </span> <span>Arquitectura hexagonal Parte IV Patrones de arquitectura sobre la capa Application</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Entrada</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Buscar..."> </span> <span id="search-cancel" >Cancelar</span></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container pl-xl-4 pr-xl-4"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pr-xl-4"><div class="post pl-1 pr-1 pl-md-2 pr-md-2"><h1 data-toc-skip>Arquitectura hexagonal Parte IV Patrones de arquitectura sobre la capa Application</h1><div class="post-meta text-muted"> <span> Publicado <em class="" data-ts="1667835120" data-df="YYYY-MM-DD" data-toggle="tooltip" data-placement="bottom"> 2022-11-07 </em> </span><div class="d-flex justify-content-between"> <span> Por <em> Benjamin </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="2039 palabras"> <em>11 min</em> de lectura</span></div></div></div><div class="post-content"><p><img data-src="https://i.ibb.co/G9rmWpC/Screen-Shot-2022-12-04-at-23-48-50.png" alt="image" data-proofer-ignore></p><p>En nuestro post anterior modelamos nuestro dominio y nuestras reglas de negocio con Domain Driven Design implementamos los conceptos y patrones más usados en este enfoque de desarrollo. En esta ocasión nos enfocaremos en nuestra capa de aplicación en la cual definimos nuestros casos de uso. En este post definiremos patrones de arquitectura que nos permitirán crear un código mantenible y escalable.</p><h2 id="qué-componentes-se-encuentran-en-nuestra-capa-application"><span class="mr-2">¿Qué componentes se encuentran en nuestra Capa Application?</span><a href="#qué-componentes-se-encuentran-en-nuestra-capa-application" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Los componentes que podemos encontrar en esta capa son los siguientes:</p><ul><li><code class="language-plaintext highlighter-rouge">Application Services</code>: Son nuestros casos de uso o los llamados <code class="language-plaintext highlighter-rouge">features</code> de nuestra aplicación.<li><code class="language-plaintext highlighter-rouge">Ports</code>: componentes que deben interactuar con servicios externos o componentes de carácter más técnicos que no se relacionan con el dominio, por ejemplo un componente que necesite enviar emails<li>Event Subscribers: Componentes que se suscriben a eventos y deben ejecutar algún caso de uso o <code class="language-plaintext highlighter-rouge">feature</code></ul><p>La principal diferencia entre los servicios de aplicación y servicios de dominio es que los servicios de dominio contienen lógicas y reglas de negocio asociadas a las entidades, mientras que los servicios de aplicación hacen uso de los componentes de dominio coordinando el uso de los servicios de dominio u los otros componentes existentes para cumplir con el objetivo del caso de uso o <code class="language-plaintext highlighter-rouge">feature</code> asociado.</p><h2 id="estructura-básica-de-la-capa-application"><span class="mr-2">Estructura básica de la capa Application</span><a href="#estructura-básica-de-la-capa-application" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>La estructura de la capa application:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="¡Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre><td class="rouge-code"><pre> core
├──  application
│   ├──  events
│   │   └──  subscribers
│   │       └──  StockUpdaterSubscriber.ts
│   ├──  ports
│   │   └──  EmailSender.ts
│   └──  services
│       ├──  CatalogUseCases.ts
│       └──  PurchaseUseCases.ts
└──  domain
    ├──  entities
    ├──  repositories
    └──  services
</pre></table></code></div></div><p>Nuestros casos de uso:</p><div class="language-typescript highlighter-rouge"><div class="code-header"> <span data-label-text="TypeScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="¡Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
</pre><td class="rouge-code"><pre><span class="k">export</span> <span class="kd">class</span> <span class="nx">PurchaseUseCases</span> <span class="p">{</span>

    <span class="kd">constructor</span><span class="p">(</span><span class="k">private</span> <span class="nx">order</span><span class="p">:</span> <span class="nx">OrderService</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span>

    <span class="k">async</span> <span class="nx">createOrder</span><span class="p">(</span><span class="nx">createorder</span><span class="p">:</span> <span class="nx">CreateOrderDto</span><span class="p">):</span> <span class="nb">Promise</span><span class="o">&lt;</span><span class="nx">OrderCreatedDto</span><span class="o">&gt;</span>  <span class="p">{</span>

        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">order</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">createorder</span><span class="p">)</span> <span class="c1">// creating an order instance</span>
            <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">order</span> <span class="o">=&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">order</span><span class="p">.</span><span class="nx">save</span><span class="p">(</span><span class="nx">order</span><span class="p">))</span> <span class="c1">// save to database</span>
            <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">order</span> <span class="o">=&gt;</span> <span class="nx">order</span><span class="p">.</span><span class="nx">getSummary</span><span class="p">())</span> <span class="c1">// return summary</span>

    <span class="p">}</span>

    <span class="k">async</span> <span class="nx">getOrders</span><span class="p">(</span><span class="nx">getorder</span><span class="p">:</span> <span class="nx">GetOrdersRequest</span><span class="p">)</span> <span class="p">{</span>
        
        <span class="kd">const</span> <span class="nx">offset</span> <span class="o">=</span> <span class="nx">getorder</span><span class="p">.</span><span class="nx">page</span> <span class="o">-</span> <span class="mi">1</span> <span class="c1">// define offset for query</span>
        <span class="kd">const</span> <span class="nx">orders</span> <span class="o">=</span> <span class="k">await</span> <span class="k">this</span><span class="p">.</span><span class="nx">order</span><span class="p">.</span><span class="nx">getOrdersSlice</span><span class="p">(</span><span class="nx">getorder</span><span class="p">.</span><span class="nx">size</span><span class="p">,</span> <span class="nx">offset</span><span class="p">)</span> <span class="c1">// get orders slice</span>
        <span class="kd">const</span> <span class="nx">totalRecords</span> <span class="o">=</span> <span class="k">await</span> <span class="k">this</span><span class="p">.</span><span class="nx">order</span><span class="p">.</span><span class="nx">getOrdersCount</span><span class="p">()</span> <span class="c1">// data count</span>
        
        <span class="c1">// creating a paginated</span>
        <span class="k">return</span> <span class="nx">Paginated</span><span class="p">.</span><span class="nx">create</span><span class="p">({</span>
            <span class="p">...</span><span class="nx">getorder</span><span class="p">,</span>
            <span class="na">count</span><span class="p">:</span> <span class="nx">totalRecords</span><span class="p">,</span>
            <span class="na">data</span><span class="p">:</span> <span class="nx">orders</span><span class="p">,</span>
        <span class="p">})</span>

    <span class="p">}</span>

<span class="p">}</span>

<span class="k">export</span> <span class="kd">class</span> <span class="nx">CatalogUseCase</span> <span class="p">{</span>
  
    <span class="kd">constructor</span><span class="p">(</span><span class="k">private</span> <span class="nx">product</span><span class="p">:</span> <span class="nx">ProductService</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span>

    <span class="k">async</span> <span class="nx">getProductsByFilter</span><span class="p">(</span><span class="nx">filter</span><span class="p">:</span> <span class="nx">filtersRequest</span><span class="p">)</span> <span class="p">{</span>
        
        <span class="kd">const</span> <span class="nx">offset</span> <span class="o">=</span> <span class="nx">filter</span><span class="p">.</span><span class="nx">page</span> <span class="o">-</span> <span class="mi">1</span> <span class="c1">// define offset for query</span>
        <span class="kd">const</span> <span class="nx">products</span> <span class="o">=</span> <span class="k">await</span> <span class="k">this</span><span class="p">.</span><span class="nx">products</span><span class="p">.</span><span class="nx">getProductsByFilter</span><span class="p">(</span><span class="nx">filter</span><span class="p">)</span> <span class="c1">// get products</span>
        <span class="kd">const</span> <span class="nx">totalRecords</span> <span class="o">=</span> <span class="k">await</span> <span class="k">this</span><span class="p">.</span><span class="nx">order</span><span class="p">.</span><span class="nx">countProductByFilter</span><span class="p">(</span><span class="nx">filter</span><span class="p">)</span> <span class="c1">// data count</span>
        
        <span class="c1">// creating a paginated</span>
        <span class="k">return</span> <span class="nx">Paginated</span><span class="p">.</span><span class="nx">create</span><span class="p">({</span>
            <span class="p">...</span><span class="nx">filter</span><span class="p">,</span>
            <span class="na">count</span><span class="p">:</span> <span class="nx">totalRecords</span><span class="p">,</span>
            <span class="na">data</span><span class="p">:</span> <span class="nx">products</span><span class="p">,</span>
        <span class="p">})</span>

    <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><p>En este enfoque nos enfocamos en definir los casos de uso, pero en algunas implementaciones de arquitectura hexagonal se definen los controladores dentro de la capa de aplicación es un enfoque válido ya que muchas veces nuestra aplicación es solo un API CRUD donde los casos de uso y la lógica de dominio no son tan complejas. Estas implementación generalmente utilizan librerías de terceros o frameworks en sus controladores y hacen llamado de los servicios de aplicación o incluso solo de los servicios de aplicación.</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="¡Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre><td class="rouge-code"><pre> core
├──  application
│   ├──  controllers
│   │   ├──  catalog.controller.ts
│   │   └──  purchase.controller.ts
│   └──  services
│       ├──  CatalogUseCases.ts
│       └──  PurchaseUseCases.ts
└──  domain
    ├──  entities
    ├──  repositories
    └──  services
</pre></table></code></div></div><h2 id="exponiendo-los-servicios-de-aplicación"><span class="mr-2">Exponiendo los servicios de aplicación</span><a href="#exponiendo-los-servicios-de-aplicación" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Para hacer uso de nuestros casos de uso solo debemos inyectar nuestros servicios de aplicación en componentes de tipo presentacional como lo puede ser un Controlador Rest y hacer uso de los métodos expuestos por nuestros casos de uso.</p><div class="language-typescript highlighter-rouge"><div class="code-header"> <span data-label-text="TypeScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="¡Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="c1">// using Get products use case </span>
<span class="kd">const</span> <span class="nx">products</span> <span class="o">=</span> <span class="k">await</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">catalog</span><span class="p">.</span><span class="nx">getProductByFilter</span><span class="p">(</span><span class="nx">filter</span><span class="p">)</span>
</pre></table></code></div></div><p>En casos simples, este enfoque puede ser suficiente como una API CRUD. Pero cuando nuestra aplicación contiene lógicas de dominio complejas, las que pueden evolucionar en el tiempo y no queremos que estos cambios rompan las interacciones entre clientes y servicios y a su vez queremos escalabilidad Necesitamos otro enfoque.</p><h2 id="usando-cqrs-dentro-de-nuestra-capa-application"><span class="mr-2">Usando CQRS dentro de nuestra capa application</span><a href="#usando-cqrs-dentro-de-nuestra-capa-application" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Dentro del diseño de nuestra capa de dominio y aplicación podemos implementar CQRS el cual significa segregación de responsabilidades de comandos y consultas, Un elegante significado en el mundo de las arquitecturas limpias. Básicamente, CQRS es un patrón de diseño el cual separa las operaciones de lectura y escritura sobre un almacén de datos. La implementación de CQRS en una aplicación puede maximizar el rendimiento y la escalabilidad. La flexibilidad que nos entrega este enfoque nos permite que nuestro sistema evolucione mejor con el tiempo y evita que procesos de actualización y lectura provoquen conflictos de combinación en nuestra capa de dominio.</p><p>En resumen, CQRS No solo mejora la arquitectura de las operaciones sobre nuestro dominio, sino que nos provee una manera efectiva para <strong>mejorar el rendimiento y escalabilidad de nuestra aplicación</strong>.</p><h2 id="por-qué-o-cuando-debería-implementar-cqrs"><span class="mr-2">¿Por qué o cuando debería implementar CQRS?</span><a href="#por-qué-o-cuando-debería-implementar-cqrs" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>CQRS nos da una interfaz común para que nuestros componentes de tipo cliente o ui puedan comunicarse a través de comandos y queries. CQRS también se utiliza en aplicaciones de alto rendimiento. Al separar las consultas de los comandos, podemos separar nuestras fuentes de datos en una de lectura y otra de escritura, con lo que podríamos escoger un motor de base datos adaptado a nuestras necesidades de dominio y no al revés, así evitamos adaptar nuestro código a estrategias de performance que de una u otra manera pueden contaminar nuestro dominio. También Fomenta el uso del asincronismo en acciones más lentas, podemos emplear comandos y definir quien atiende a esa petición sin bloquear el proceso actual.</p><h2 id="cqrs-y-arquitecturas-orientadas-a-eventos"><span class="mr-2">CQRS y arquitecturas orientadas a eventos</span><a href="#cqrs-y-arquitecturas-orientadas-a-eventos" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Este enfoque se complementa perfecto con patrones de arquitectura orientados a eventos donde definimos subscriptores que estarán a la escucha sobre eventos específicos pueden ser tanto eventos de dominio como eventos de integración cuando un evento se produzca nuestros subscriptores ejecutaran lógicas de negocio a través de los servicios de aplicación entonces teniendo estos 3 componentes:</p><ul><li><code class="language-plaintext highlighter-rouge">Comandos</code>: acciones que causan efectos secundarios sobre el dominio (escritura)<li><code class="language-plaintext highlighter-rouge">Queries</code>: acciones que devuelven datos relacionados al dominio (lectura)<li><code class="language-plaintext highlighter-rouge">Eventos</code>: eventos relacionados con sucesos ocurridos dentro nuestro dominio o eventos enviados por otras aplicaciones.</ul><p>Podemos definir una arquitectura para exponer nuestros casos de uso mediante una interfaz común, esta sería nuestra API de la copa core (application y domain)</p><h2 id="cqrs-con-nestjs"><span class="mr-2">CQRS con Nestjs</span><a href="#cqrs-con-nestjs" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>En esta ocasión implementaremos CQRS con Nestjs y su módulo <code class="language-plaintext highlighter-rouge">cqrs</code> este módulo es muy comodo, ya que nos provee una forma limpia de implementar comando, queries e incluso eventos mediante anotaciones e inyectando los componentes <code class="language-plaintext highlighter-rouge">CommandBus</code>, <code class="language-plaintext highlighter-rouge">QueryBus</code> y <code class="language-plaintext highlighter-rouge">EventBus</code>.</p><blockquote><p>CQRS por debajo implementa los siguientes patrones de diseño: Mediator y Command</p></blockquote><p>Instalamos nuestro módulo:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="¡Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>npm <span class="nb">install</span> <span class="nt">--save</span> @nestjs/cqrs

</pre></table></code></div></div><p>Para hacer uso de comandos en cqrs debemos crear una clase que represente los datos de entrada de nuestro comando. Al definir un comando debemos también definir un <code class="language-plaintext highlighter-rouge">handler</code> que no es nada más que una clase con la anotación <code class="language-plaintext highlighter-rouge">@CommandHandler</code> finalmente debemos agregarlo como <code class="language-plaintext highlighter-rouge">provider</code> dentro de nuestro módulo <code class="language-plaintext highlighter-rouge">core</code>.</p><div class="language-typescript highlighter-rouge"><div class="code-header"> <span data-label-text="TypeScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="¡Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre><td class="rouge-code"><pre><span class="c1">// command to create a order</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">CreateOrderCommand</span> <span class="p">{</span>
    <span class="kd">constructor</span><span class="p">(</span><span class="k">public</span> <span class="k">readonly</span> <span class="nx">order</span><span class="p">:</span> <span class="nx">CreateOrderDto</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span>
<span class="p">}</span>
<span class="c1">// handler for create order command</span>
<span class="p">@</span><span class="nd">CommandHandler</span><span class="p">(</span><span class="nx">CreateOrderCommand</span><span class="p">)</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">CreateOrderHandler</span> <span class="k">implements</span> <span class="nx">ICommandHandler</span><span class="o">&lt;</span><span class="nx">CreateOrderCommand</span><span class="o">&gt;</span> <span class="p">{</span>

    <span class="kd">constructor</span><span class="p">(</span><span class="k">private</span> <span class="na">purchase</span><span class="p">:</span> <span class="nx">PurchaseUseCases</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span>

    <span class="k">async</span> <span class="nx">execute</span><span class="p">(</span><span class="na">command</span><span class="p">:</span> <span class="nx">CreateOrderCommand</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">purchase</span><span class="p">.</span><span class="nx">createOrder</span><span class="p">(</span><span class="nx">command</span><span class="p">.</span><span class="nx">order</span><span class="p">)</span>
    <span class="p">}</span>

<span class="p">}</span>
</pre></table></code></div></div><p>Podemos implementar múltiples handlers para nuestro comando en algunos escenarios, puede ser útil como un log de los datos como de auditoria.</p><p>Ahora implementaremos nuestras cqrs queries y sus handler:</p><div class="language-typescript highlighter-rouge"><div class="code-header"> <span data-label-text="TypeScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="¡Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre><td class="rouge-code"><pre><span class="c1">// query for orders</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">OrdersQuery</span> <span class="p">{</span>

    <span class="kd">constructor</span><span class="p">(</span><span class="k">public</span> <span class="k">readonly</span> <span class="nx">page</span><span class="p">:</span> <span class="kr">number</span><span class="p">,</span> <span class="k">public</span> <span class="k">readonly</span>  <span class="nx">size</span><span class="p">:</span> <span class="kr">number</span><span class="p">){}</span>

<span class="p">}</span>
<span class="c1">// handler</span>
<span class="p">@</span><span class="nd">QueryHandler</span><span class="p">(</span><span class="nx">OrdersQuery</span><span class="p">)</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">OrdersQueryHandler</span> <span class="k">implements</span> <span class="nx">IQueryHandler</span><span class="o">&lt;</span><span class="nx">OrdersQuery</span><span class="o">&gt;</span><span class="p">{</span>

    <span class="kd">constructor</span><span class="p">(</span><span class="k">private</span> <span class="na">purchase</span><span class="p">:</span> <span class="nx">PurchaseUseCases</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span>

    <span class="nx">execute</span><span class="p">(</span><span class="na">query</span><span class="p">:</span> <span class="nx">OrdersQuery</span><span class="p">):</span> <span class="nb">Promise</span><span class="o">&lt;</span><span class="nx">Paginated</span><span class="o">&lt;</span><span class="nx">Order</span><span class="o">&gt;&gt;</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">purchase</span><span class="p">.</span><span class="nx">getOrders</span><span class="p">(</span><span class="nx">query</span><span class="p">)</span>
    <span class="p">}</span>

<span class="p">}</span>
</pre></table></code></div></div><p>Ahora para poder realizar nuestros comandos y queries debemos inyectar en nuestro <code class="language-plaintext highlighter-rouge">PurchaseController</code> los componentes <code class="language-plaintext highlighter-rouge">QueryBus</code> y <code class="language-plaintext highlighter-rouge">CommandBus</code>.</p><div class="language-typescript highlighter-rouge"><div class="code-header"> <span data-label-text="TypeScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="¡Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="p">@</span><span class="nd">Controller</span><span class="p">(</span><span class="dl">'</span><span class="s1">/purchase</span><span class="dl">'</span><span class="p">)</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">PurchaseController</span> <span class="p">{</span>

    <span class="kd">constructor</span><span class="p">(</span>
        <span class="k">private</span> <span class="nx">command</span><span class="p">:</span> <span class="nx">CommandBus</span><span class="p">,</span>
        <span class="k">private</span> <span class="nx">query</span><span class="p">:</span> <span class="nx">QueryBus</span>
    <span class="p">)</span> <span class="p">{}</span>
  
<span class="p">}</span>
</pre></table></code></div></div><p>Ahora desde nuestros endpoints hacemos uso de nuestros <code class="language-plaintext highlighter-rouge">CommandBus</code> y <code class="language-plaintext highlighter-rouge">QueryBus</code></p><div class="language-typescript highlighter-rouge"><div class="code-header"> <span data-label-text="TypeScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="¡Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre><td class="rouge-code"><pre>
    <span class="p">@</span><span class="nd">Post</span><span class="p">(</span><span class="dl">'</span><span class="s1">/order</span><span class="dl">'</span><span class="p">)</span>
    <span class="k">async</span> <span class="nx">create</span><span class="p">(@</span><span class="nd">Body</span><span class="p">()</span> <span class="nx">order</span><span class="p">:</span> <span class="nx">CreateOrderRequest</span><span class="p">):</span> <span class="nb">Promise</span><span class="o">&lt;</span><span class="nx">OrderCreatedDto</span><span class="o">&gt;</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">await</span> <span class="k">this</span><span class="p">.</span><span class="nx">command</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="k">new</span> <span class="nx">CreateOrderCommand</span><span class="p">({</span>
            <span class="p">...</span><span class="nx">order</span>
        <span class="p">}))</span>
    <span class="p">}</span>

    <span class="p">@</span><span class="nd">Get</span><span class="p">(</span><span class="dl">'</span><span class="s1">/order</span><span class="dl">'</span><span class="p">)</span>
    <span class="k">async</span> <span class="nx">getOrders</span><span class="p">(@</span><span class="nd">Query</span><span class="p">(</span><span class="dl">'</span><span class="s1">page</span><span class="dl">'</span><span class="p">)</span><span class="nx">page</span><span class="p">:</span> <span class="kr">number</span><span class="p">,</span> <span class="p">@</span><span class="nd">Query</span><span class="p">(</span><span class="dl">'</span><span class="s1">size</span><span class="dl">'</span><span class="p">)</span> <span class="nx">size</span><span class="p">:</span> <span class="kr">number</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="k">new</span> <span class="nx">OrdersQuery</span><span class="p">(</span><span class="nx">page</span><span class="p">,</span> <span class="nx">size</span><span class="p">))</span>
    <span class="p">}</span>

<span class="p">}</span>
</pre></table></code></div></div><p>CQRS dentro de nuestra aplicación está lista. Ahora configuraremos la escucha de eventos. Nuestra aplicación ya posee una implementación de EventBus y subscripción de eventos, pero utilizaremos las herramientas que nos provee nestjs para mostrar la utilidad del módulo <code class="language-plaintext highlighter-rouge">cqrs</code></p><p>Implementamos un nuevo servicio de aplicación para contener los casos de usos asociados al contexto de Stock.</p><div class="language-typescript highlighter-rouge"><div class="code-header"> <span data-label-text="TypeScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="¡Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre><td class="rouge-code"><pre><span class="p">@</span><span class="nd">Injectable</span><span class="p">()</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">StockUseCase</span> <span class="p">{</span>

    <span class="kd">constructor</span><span class="p">(</span><span class="k">private</span> <span class="nx">product</span><span class="p">:</span> <span class="nx">ProductService</span><span class="p">)</span> <span class="p">{}</span>

    <span class="k">async</span> <span class="nx">updateStockProducts</span><span class="p">(</span><span class="nx">order</span><span class="p">:</span> <span class="nx">Order</span><span class="p">)</span> <span class="p">{</span>
        
        <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">detail</span> <span class="k">of</span> <span class="nx">order</span><span class="p">.</span><span class="nx">details</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">await</span> <span class="k">this</span><span class="p">.</span><span class="nx">product</span><span class="p">.</span><span class="nx">updateProductStock</span><span class="p">(</span><span class="nx">detail</span><span class="p">.</span><span class="nx">product</span><span class="p">.</span><span class="nx">productId</span><span class="p">,</span> <span class="nx">detail</span><span class="p">.</span><span class="nx">quantity</span><span class="p">)</span>
        <span class="p">}</span>
        
    <span class="p">}</span>

<span class="p">}</span>
</pre></table></code></div></div><p>Implementación de eventos, reutilizaremos nuestro evento de dominio ya definido anteriormente <code class="language-plaintext highlighter-rouge">OrderCreated</code> y haremos una reimplementación de nuestro puerto <code class="language-plaintext highlighter-rouge">DomainEventBus</code> utilizando el servicio <code class="language-plaintext highlighter-rouge">EventBus</code> del módulo <code class="language-plaintext highlighter-rouge">@nest/cqrs</code></p><div class="language-typescript highlighter-rouge"><div class="code-header"> <span data-label-text="TypeScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="¡Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre><td class="rouge-code"><pre><span class="c1">// port </span>
<span class="k">export</span> <span class="kr">interface</span> <span class="nx">EventBusPublisher</span> <span class="p">{</span>
    <span class="nx">publish</span><span class="p">(</span><span class="nx">event</span><span class="p">:</span> <span class="nx">EventBase</span><span class="p">):</span> <span class="k">void</span> 
<span class="p">}</span>
<span class="c1">// adapter</span>
<span class="p">@</span><span class="nd">Injectable</span><span class="p">()</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">EventBusPublisherDomain</span> <span class="k">implements</span> <span class="nx">EventBusPublisher</span> <span class="p">{</span>
    
    <span class="kd">constructor</span><span class="p">(</span><span class="k">private</span> <span class="nx">eventbus</span><span class="p">:</span> <span class="nx">EventBus</span><span class="p">){}</span>

    <span class="k">async</span> <span class="nx">publish</span><span class="p">(</span><span class="nx">event</span><span class="p">:</span> <span class="nx">EventBase</span><span class="p">):</span> <span class="nb">Promise</span><span class="o">&lt;</span><span class="k">void</span><span class="o">&gt;</span> <span class="p">{</span>
        <span class="k">await</span> <span class="k">this</span><span class="p">.</span><span class="nx">eventbus</span><span class="p">.</span><span class="nx">publish</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span>
    <span class="p">}</span>

<span class="p">}</span>

</pre></table></code></div></div><p>En esta ocasión vemos el poder de los puertos y adaptadores, nos permite una migración de tecnologías sin mayores contratiempos, solo debemos modificar nuestro módulo core para realizar las inyecciones correspondientes. Finalmente implementamos nuestro <code class="language-plaintext highlighter-rouge">EventHandler</code>.</p><div class="language-typescript highlighter-rouge"><div class="code-header"> <span data-label-text="TypeScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="¡Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre><td class="rouge-code"><pre>
<span class="c1">// handler</span>
<span class="p">@</span><span class="nd">EventsHandler</span><span class="p">(</span><span class="nx">OrderCreatedEvent</span><span class="p">)</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">OrderCreatedHandler</span> <span class="k">implements</span> <span class="nx">IEventHandler</span><span class="o">&lt;</span><span class="nx">OrderCreatedEvent</span><span class="o">&gt;</span> <span class="p">{</span>

    <span class="kd">constructor</span><span class="p">(</span><span class="k">private</span> <span class="na">stock</span><span class="p">:</span> <span class="nx">StockUseCase</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span>

    <span class="k">async</span> <span class="nx">handle</span><span class="p">(</span><span class="na">event</span><span class="p">:</span> <span class="nx">OrderCreatedEvent</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">order</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">orderCreated</span><span class="p">.</span><span class="nx">getData</span><span class="p">()</span>
        <span class="k">await</span> <span class="k">this</span><span class="p">.</span><span class="nx">stock</span><span class="p">.</span><span class="nx">updateStockProducts</span><span class="p">(</span><span class="nx">order</span><span class="p">)</span>
    <span class="p">}</span>
    
<span class="p">}</span>
</pre></table></code></div></div><p>Publicación de evento <code class="language-plaintext highlighter-rouge">OrderCreated</code>:</p><div class="language-typescript highlighter-rouge"><div class="code-header"> <span data-label-text="TypeScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="¡Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
</pre><td class="rouge-code"><pre><span class="k">export</span> <span class="kd">class</span> <span class="nx">OrderService</span> <span class="p">{</span>
  
  <span class="kd">constructor</span><span class="p">(</span>
        <span class="k">private</span> <span class="k">readonly</span> <span class="nx">order</span><span class="p">:</span> <span class="nx">OrderRepository</span><span class="p">,</span>
        <span class="k">private</span> <span class="k">readonly</span> <span class="nx">eventbus</span><span class="p">:</span> <span class="nx">EventBusPublisher</span>
    <span class="p">)</span> <span class="p">{</span> <span class="p">}</span>

    <span class="k">async</span> <span class="nx">save</span><span class="p">(</span><span class="nx">order</span><span class="p">:</span> <span class="nx">Order</span><span class="p">):</span> <span class="nb">Promise</span><span class="o">&lt;</span><span class="nx">Order</span><span class="o">&gt;</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">order</span>
            <span class="p">.</span><span class="nx">save</span><span class="p">(</span><span class="nx">order</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">orderId</span> <span class="o">=&gt;</span> <span class="p">{</span>
                <span class="nx">order</span><span class="p">.</span><span class="nx">orderId</span> <span class="o">=</span> <span class="nx">orderId</span>
                <span class="k">return</span> <span class="nx">order</span>
            <span class="p">})</span>
            <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">order</span> <span class="o">=&gt;</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">eventbus</span><span class="p">.</span><span class="nx">publish</span><span class="p">(</span><span class="k">new</span> <span class="nx">OrderCreated</span><span class="p">(</span><span class="nx">order</span><span class="p">))</span><span class="c1">// publish domain event</span>
                <span class="k">return</span> <span class="nx">order</span>
            <span class="p">})</span>
    <span class="p">}</span>

  <span class="c1">// ...hidenn code</span>
<span class="p">}</span>
</pre></table></code></div></div><h2 id="estructura-final-de-la-aplicación"><span class="mr-2">Estructura final de la aplicación:</span><a href="#estructura-final-de-la-aplicación" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Nuestra aplicación queda de la siguiente manera agregamos el directorio <code class="language-plaintext highlighter-rouge">entrypoint</code> dentro de nuestra capa <code class="language-plaintext highlighter-rouge">application</code> la cual define la manera de interactuar con nuestros casos de uso este enfoque nos da claridad de las acciones de lectura, escritura y escucha de eventos.</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="¡Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
</pre><td class="rouge-code"><pre> core
├──  application
│   ├──  entrypoint
│   │   ├──  commands
│   │   │   ├──  CreateOrderCommand.ts
│   │   │   └──  handlers
│   │   │       └──  CreateOrderHandler.ts
│   │   ├──  events
│   │   │   └──  handlers
│   │   │       └──  OrderCreatedHandler.ts
│   │   └──  queries
│   │       ├──  handlers
│   │       │   └──  OrdersQueryHandler.ts
│   │       └──  OrdersQuery.ts
│   ├──  services
│   │   ├──  CatalogUseCases.ts
│   │   ├──  CompanySuppliersUseCases.ts
│   │   ├──  CompanyUseCases.ts
│   │   ├──  CustomerPortfolioUseCases.ts
│   │   ├──  PurchaseUseCases.ts
│   │   └──  StockUseCases.ts
│   └──  utils
│       └──  Paginated.ts
├──  core.module.ts
</pre></table></code></div></div><h2 id="conclusiones"><span class="mr-2">Conclusiones</span><a href="#conclusiones" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Básicamente, CQRS nos permite separar las escrituras y lecturas de nuestro dominio para poder crear sistemas escalables. Este post no terminará aca, ya que no hemos visto los beneficios de escalabilidad que nos entrega CQRS y las arquitecturas orientadas a eventos. Pero esos será en unos próximos posts.</p><p>Meme de cortesía</p><p><img data-src="https://i.ibb.co/TMg1drj/memeback.jpg&quot;" alt="meme" data-proofer-ignore></p><p>Puedes ver los demás artículos de arquitectura hexagonal acá 😉</p><ul><li><a href="/posts/implementando-hexagonal-con-nestjs-part1/">Arquitectura hexagonal Parte I </a><li><a href="/posts/implementando-hexagonal-con-nestjs-part2/">Arquitectura hexagonal Parte II </a><li><a href="/posts/implementando-hexagonal-con-nestjs-part3/">Arquitectura hexagonal Parte III </a></ul><h2 id="github-repository"><span class="mr-2"><a href="https://github.com/nullpointer-excelsior/nestjs-northwind-hexagonal/tree/main/clean-architecture-examples/part-4-application-layer-patterns">Github repository</a></span><a href="#github-repository" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='//categories/programacion/'>Programacion</a>, <a href='//categories/nestjs/'>Nestjs</a>, <a href='//categories/arquitectura-de-software/'>Arquitectura de software</a>, <a href='//categories/typescript/'>Typescript</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="//tags/typescript/" class="post-tag no-text-decoration" >typescript</a> <a href="//tags/nestjs/" class="post-tag no-text-decoration" >nestjs</a> <a href="//tags/hexagonal/" class="post-tag no-text-decoration" >hexagonal</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> Esta entrada está licenciada bajo <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> por el autor.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Compartir</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Arquitectura+hexagonal+Parte+IV+Patrones+de+arquitectura+sobre+la+capa+Application+-+Nullpointer+Excelsior&url=https%3A%2F%2Fnullpointer-excelsior.github.io%2Fposts%2Fimplementando-hexagonal-con-nestjs-part4%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Arquitectura+hexagonal+Parte+IV+Patrones+de+arquitectura+sobre+la+capa+Application+-+Nullpointer+Excelsior&u=https%3A%2F%2Fnullpointer-excelsior.github.io%2Fposts%2Fimplementando-hexagonal-con-nestjs-part4%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Fnullpointer-excelsior.github.io%2Fposts%2Fimplementando-hexagonal-con-nestjs-part4%2F&text=Arquitectura+hexagonal+Parte+IV+Patrones+de+arquitectura+sobre+la+capa+Application+-+Nullpointer+Excelsior" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fnullpointer-excelsior.github.io%2Fposts%2Fimplementando-hexagonal-con-nestjs-part4%2F" data-toggle="tooltip" data-placement="top" title="Linkedin" target="_blank" rel="noopener" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copiar enlace" data-title-succeed="¡Enlace copiado!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Actualizado recientemente</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/microservicios-observabilidad-en-microservicios-un-ejemplo-practico-de-trazas-distribuidas/">Microservicios 2 Observabilidad en NestJs, un ejemplo práctico de trazas distribuidas</a><li><a href="/posts/realtime-with-reactive-programming/">Aplicaciones en tiempo real con programación reactiva</a><li><a href="/posts/tranajando-con-1millon-de-registros-con-java-stream/">Trabajando con 1 millón de registros con Java Stream</a><li><a href="/posts/disenando-microservicios-con-ddd/">Diseñando Microservicios con Domain Driven Design y NestJS</a><li><a href="/posts/alto-rendimiento-con-cqrs-eventos-en-nestjs/">CQRS en Soluciones de Alto Rendimiento con Nestjs</a></ul></div><div id="access-tags"><div class="panel-heading">Etiquetas populares</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/typescript/">typescript</a> <a class="post-tag" href="/tags/nestjs/">nestjs</a> <a class="post-tag" href="/tags/arquitectura/">arquitectura</a> <a class="post-tag" href="/tags/hexagonal/">hexagonal</a> <a class="post-tag" href="/tags/javascript/">javascript</a> <a class="post-tag" href="/tags/frontend/">frontend</a> <a class="post-tag" href="/tags/java/">Java</a> <a class="post-tag" href="/tags/microservicios/">microservicios,</a> <a class="post-tag" href="/tags/typescript/">Typescript</a> <a class="post-tag" href="/tags/architecture/">Architecture</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contenido</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 pl-3 pr-3 pr-xl-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Lecturas adicionales</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/implementando-hexagonal-con-nestjs-part1/"><div class="card-body"> <em class="small" data-ts="1666711920" data-df="YYYY-MM-DD" > 2022-10-25 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Arquitectura hexagonal con nestjs Parte I</h3><div class="text-muted small"><p> No voy a profundizar en que es una arquitectura hexagonal, ya que tenemos un montón de recursos que te lo explican de forma detallada, pero ojo que cuando hablamos de este tipo de arquitecturas d...</p></div></div></a></div><div class="card"> <a href="/posts/implementando-hexagonal-con-nestjs-part2/"><div class="card-body"> <em class="small" data-ts="1666798320" data-df="YYYY-MM-DD" > 2022-10-26 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Arquitectura hexagonal Parte II Conectando una clean architecture con Nestjs</h3><div class="text-muted small"><p> La segunda parte de esta serie de arquitectura hexagonal o (clean architecture) profundizaremos como configurar la interacción de un framework con el core de nuestra arquitectura, Nestjs nos ofre...</p></div></div></a></div><div class="card"> <a href="/posts/nestjs-tips-la-versatilidad-de-configuration-module/"><div class="card-body"> <em class="small" data-ts="1666971120" data-df="YYYY-MM-DD" > 2022-10-28 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Nestjs tips La versatilidad de ConfigMdule</h3><div class="text-muted small"><p> El manejo de credenciales y configuraciones en nuestras aplicaciones es generalmente algo indispensable para los distintos escenarios de desarrollo y despliegue. Algo tedioso a veces, pero nuestr...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="//posts/implementando-hexagonal-con-nestjs-part3/" class="btn btn-outline-primary" prompt="Anterior"><p>Arquitectura hexagonal Parte III Modelando el Dominio a Fondo con Domain Driven Design</p></a> <a href="//posts/alto-rendimiento-con-cqrs-eventos-en-nestjs/" class="btn btn-outline-primary" prompt="Nuevo"><p>CQRS en Soluciones de Alto Rendimiento con Nestjs</p></a></div></div></div><footer class="row pl-3 pr-3"><div class="col-12 d-flex justify-content-between align-items-center text-muted pl-0 pr-0"><div class="footer-left"><p class="mb-0"> © 2025 <a href="https://github.com/nullpointer-excelsior">Benjamin</a>. <span data-toggle="tooltip" data-placement="top" title="Salvo que se indique explícitamente, las entradas de este blog están licenciadas bajo la Creative Commons Attribution 4.0 International (CC BY 4.0) License por el autor.">Algunos derechos reservados.</span></p></div><div class="footer-right"><p class="mb-0"> Hecho con <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> usando el tema <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> .</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Etiquetas populares</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/typescript/">typescript</a> <a class="post-tag" href="/tags/nestjs/">nestjs</a> <a class="post-tag" href="/tags/arquitectura/">arquitectura</a> <a class="post-tag" href="/tags/hexagonal/">hexagonal</a> <a class="post-tag" href="/tags/javascript/">javascript</a> <a class="post-tag" href="/tags/frontend/">frontend</a> <a class="post-tag" href="/tags/java/">Java</a> <a class="post-tag" href="/tags/microservicios/">microservicios,</a> <a class="post-tag" href="/tags/typescript/">Typescript</a> <a class="post-tag" href="/tags/architecture/">Architecture</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">¡Oops! No se encuentran resultados.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/es.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/unregister.js"></script>
